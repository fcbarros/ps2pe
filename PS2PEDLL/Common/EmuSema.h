/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
// File: EmuSema.h
// Version: 1.000
// Desc: Main Header File for PS2 Semaphore handling
//
// Author: Fabio "GoldFinger" Barros
// Created: 21/05/2002
// Modifications:
// * Version 1.000 ( 21/05/2002 ): Created
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////

#ifndef __EMU_SEMA_H__
#define __EMU_SEMA_H__

#include "EmuMemory.h"


/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
// Structs
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////

typedef struct
{
   int      count,
            max_count,
            init_count,
            wait_threads;
   EMU_U32  attr,
            option;
} t_sema;


extern unsigned long ksema[32];


/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
// Fucntions
/////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////

// Initializes Semaphores
void Emu_Sema_Init( void );
// Resets Semaphores
void Emu_Sema_Reset( void );

void Emu_Sema_Bios_Create( void );
void Emu_Sema_Bios_Delete( void );
void Emu_Sema_Bios_Signal( void );
void Emu_Sema_Bios_Wait( void );
void Emu_Sema_Bios_Poll( void );

EMU_U64 Emu_Sema_Create( EMU_U32 SemaAddress );
EMU_U64 Emu_Sema_Delete( EMU_U32 SemaIndex );
EMU_U64 Emu_Sema_Signal( EMU_U32 SemaIndex );
EMU_U64 Emu_Sema_Wait( EMU_U32 SemaIndex );
EMU_U64 Emu_Sema_Poll( EMU_U32 SemaIndex );

#endif